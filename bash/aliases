# vi: ft=sh

# Alias that checks to make sure command exists
function makealias() {
    local ALIAS_NAME="${1%%=*}"
    local ALIAS_COMMAND="${1##*=}"
    alias "${1}"
}

makealias grep='command grep --color=auto'

makealias ls='command ls'
makealias l='command ls -lF --color=auto'
makealias ls='command ls -F --color=auto'
makealias ll='command ls -la --color=auto'

makealias pstree='command pstree -g 2 -w'


# Display open sockets
makealias lsock='command lsof -i -P'

# Run remote SOCKS proxy daemon
makealias socks='ssh -D 9999 -f -C -q -N'

# Chrome
makealias chrome='/Applications/Google\ Chrome.app/Contents/MacOS/Google\ Chrome'
makealias chromecanary='/Applications/Google\ Chrome\ Canary.app/Contents/MacOS/Google\ Chrome\ Canary'

# Virtualization
makealias vmrun='/Applications/VMware\ Fusion.app/Contents/Library/vmrun'

# Git Hub
if hash hub 2>/dev/null; then
    makealias git='hub'
fi

# Atom
if [ -n "$(which atom-beta)" ]; then
    makealias atom='atom-beta'
    makealias apm='apm-beta'
fi

# Virtualbox
makealias vbox='VBoxManage' && complete -o default -F _VBoxManage vbox


# Process PS
function p() {
    command ps -axr -o "user pid sig %cpu %mem addr comm" 2>/dev/null
}

function homebrew() {
    brew update && brew upgrade && brew cleanup
    brew cask cleanup
}

function mpv-sort() {
    local ARGS=( $@ )
    find "${ARGS[@]:-'.'}" \
        -d 1 \
        -type f \( -name "*avi" -o -name "*mp4" -o -name "*wmv" -o -name "*mkv" \) \
        -exec du -hma '{}' \; \
    | sort -rn \
    | cut -d $'\t' -f 2 \
    | sed 's/\(.*\)/"\1"/g' | xargs mpv
}
