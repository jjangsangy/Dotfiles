# Bash Environment
# ================
# macos specific
if [ "$(uname -s)" = "Darwin" ]; then
    export HOMEBREW_NO_AUTO_UPDATE=1
    export HOMEBREW_MAKE_JOBS=$(nproc)
fi

# shell options
export EDITOR='nvim'
export PAGER='less'

# bash history
export HISTIGNORE="&:cd:history:jobs:true:false:ls"
export HISTTIMEFORMAT='%F %T '
export HISTSIZE=100000

# bash prompt
export PROMPT_DIRTRIM=3
export PS2='>    '
export GLOBIGNORE='.DS_Store:*.o:*.pyc'
export GPG_TTY=$(tty)
export GIT_PS1_SHOWCOLORHINTS=true

# bash completion
if [ -d "${HOME}/.bash_completion.d" ]; then
    export BASH_COMPLETION_COMPAT_DIR="${HOME}/.bash_completion.d"
fi

# build environment
export MAKEFLAGS="-j$(nproc)"

# python
export PYTHONDONTWRITEBYTECODE=1
export PIP_CONFIG_FILE="${HOME}/.config/pip/pip.conf"

# ruby Environment
export RBENV_VERSION="system"

# golang Environment
if [ -d "${HOME}/Go" ]; then
    export GOPATH="${HOME}/Go"
    export GOBIN="${GOPATH}/bin"
fi

# poetry
if [ -d "${HOME}/.poetry" ] && hash pyenv 2>/dev/null; then
    export PATH="${HOME}/.poetry/bin:${PATH}"
fi

# pyenv
if [ -d ~/.pyenv ] && hash pyenv 2>/dev/null; then
    eval "$(pyenv init --no-rehash -)"
fi

# iterm2 integration
if [ -r "${HOME}/.iterm2_shell_integration.bash" ] && [ "${TERM_PROGRAM}" = "iTerm.app" ]; then
    source "${HOME}/.iterm2_shell_integration.bash"
fi

# Kube Context
if [ -d ~/.kubectx ]; then
    export PATH="${PATH}:${HOME}/.kubectx"
    export KUBECTX_CURRENT_FGCOLOR="$(tput setaf 6)" # blue text
    export KUBECTX_CURRENT_BGCOLOR="$(tput setab 7)" # white bg
fi

# vi: ft=sh
